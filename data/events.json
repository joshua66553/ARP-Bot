[null,{"name":"Music Setup","temp":"","event-type":"1","_id":"PZPZX","actions":[{"comment":"This Modifys the bot.js file to allow the Now Playing command to work!!","color":"#ff0000","name":"Comment"},{"name":"Welcome"}]},{"name":"NewEvent66","temp":"","event-type":"2","_id":"CHJWc","actions":[{"storage":"2","varName":"hex","name":"Generate Random Hex Color"}]},{"name":"AutoResponse","temp":"msg","event-type":"2","actions":[{"message":"1","varName":"msg","info":"2","storage":"1","varName2":"text","name":"Store Message Info"},{"storage":"1","varName":"text","comparison":"6","value":"(hello|hey|hi)","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"message":"1","varName":"msg","info":"4","storage":"1","varName2":"channel","name":"Store Message Info"},{"channel":"5","varName":"channel","message":"Hello!","storage":"0","varName2":"","name":"Send Message"}],"_id":"lzsst"},{"name":"fule","temp":"60","event-type":"3","_id":"ftGpI","actions":[{"storage":"1","varName":"fuel","comparison":"0","value":"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"}]},{"name":"game","temp":"ffvv","event-type":"1","_id":"pyqEY","actions":[{"activity":"2","nameText":" Alliance RP","url":"","stat":"0","name":"Set Bot Activity"},{"time":"5","measurement":"1","name":"Wait"},{"activity":"1","nameText":" Jelly's Music","url":"","stat":"0","name":"Set Bot Activity"},{"time":"5","measurement":"1","name":"Wait"},{"call":"1","name":"Jump to Action"}]},{"name":"911","temp":"","event-type":"2","_id":"jzcfp","actions":[{"storage":"2","varName":"hex","name":"Generate Random Hex Color"}]},{"name":"","temp":"","event-type":"0","_id":"EOTJB","actions":[]},{"name":"giveawayCheck","temp":"10","event-type":"3","_id":"eavvT","actions":[{"behavior":"0","interpretation":"1","code":"const fs = require('fs');\nconst Discord = require('discord.js');\nlet giveawaysDue = [];\nvar timeNow = Math.floor(Date.now() / 1000);\nvar counter = 0;\nvar interval;\nif (globalVars(\"giveawayRan\") == null) {\n    this.storeValue(1,3,\"giveawayRan\",cache);\n\n    fs.readFile('./data/giveawayData.json', async function read(err, data) {\n        if (err) {\n            throw err;\n        }\n        data = JSON.parse(data);\n    \n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                let giveaways = data[key];\n                let dueGive = await giveaways.filter(({\n                    finishUnix\n                }) => finishUnix <= timeNow);\n                if (dueGive.length > 0) {\n                    dueGive.forEach(async f => {\n                        giveawaysDue.push(f);\n                        giveaways.splice(giveaways.findIndex(e => e.id === f.id), 1)\n                    });\n    \n                    fs.writeFile(\"./data/giveawayData.json\", JSON.stringify(data), function(err) {\n                        if (err) {\n                            return console.log(err);\n                        }\n                    });\n                }\n            }\n        }\n        if (giveawaysDue.length > 0) {\n            interval = setInterval(drawWinners, 2000);\n        }\n        \n    })\n}\n\nasync function drawWinners() {\n        var channelToFetch = await client.channels.cache.get(giveawaysDue[counter][\"channel\"]);\n        if (channelToFetch != null) {\n            var giveawayMessage = await channelToFetch.messages.fetch(giveawaysDue[counter][\"giveawayMessageID\"]);\n            var giveawayEmojiCache = giveawayMessage.reactions.cache.get('ðŸŽ‰');\n            var giveawayUsers = await giveawayEmojiCache.users.fetch();\n            if (giveawayEmojiCache.count > 100) {\n                for (i=0; i<giveawayEmojiCache.count; i++) {\n                    var fetchedEmojiUsers = await giveawayEmojiCache.users.fetch({after: giveawayUsers.last().id});\n                    await giveawayUsers.concat(fetchedEmojiUsers);\n                }\n            }\n\n            giveawayUsers = giveawayUsers.array();\n            giveawayUsers = await giveawayUsers.filter(object => object.id != client.user.id);\n            var numberOfWinners = parseInt(giveawaysDue[counter][\"winner\"]);\n            var gw = giveawayMessage.embeds[0];\n\n            gw.color = 0x000000;\n            if (gw.fields.length == 6) {\n                gw.fields[5].value = \"Ended\"\n            }\n            gw.description = \"**Giveaway Ended**\\n\\n\" + gw.description\n\n            var winnerArray = [];\n            var winnerText = \"\";\n            if (giveawayUsers.length > 0) {\n                if (giveawayUsers.length > numberOfWinners) {\n                    for (var i = 0; i < numberOfWinners; i++) {\n                        var randomNumber = Math.floor(Math.random() * giveawayUsers.length);\n                        winnerArray.push(`${giveawayUsers[randomNumber]}`);\n                        giveawayUsers.splice(giveawayUsers.indexOf(randomNumber), randomNumber);\n                    }\n                } else if (giveawayUsers.length <= numberOfWinners) {\n                    for (i = 0; i < giveawayUsers.length; i++) {\n                        winnerArray.push(`${giveawayUsers[i]}`);\n                    }\n                }\n\n                for (i = 0; i < winnerArray.length; i++) {\n                    winnerText = winnerText + winnerArray[i] + '\\n';\n                }\n\n                gw.description += `\\n\\nThe winners are..\\n${winnerText}`;\n                giveawayMessage.edit({embed: gw});\n                channelToFetch.send(`ðŸŽ‰ Congratulations! ðŸŽ‰ \\n ${winnerText} \\nThey have won **${giveawaysDue[counter][\"itemGivingAway\"]}**`);\n\n            } else {\n                gw.description += \"\\n\\nNo one entered the giveaway and thus no one won.\";\n                giveawayMessage.edit({embed: gw});\n                channelToFetch.send(`ðŸŽ‰ Giveaway Ended ðŸŽ‰\\n\\nNo one entered the giveaway and thus no one won.`);\n            }\n        }\n        counter += 1;\n        if (counter >= giveawaysDue.length) {\n            clearInterval(interval);\n        }\n    }","storage":"0","varName":"","name":"Run Script"},{"time":"7","measurement":"1","name":"Wait"},{"storage":"3","varName":"giveawayRan","changeType":"0","value":"null","name":"Control Variable"}],"temp2":"America/New_York"},{"name":"giveawayStart","temp":"","event-type":"1","_id":"jEKcf","actions":[{"behavior":"0","interpretation":"0","code":"const fs = require('fs');\n\nif (globalVars(\"giveawayStartRan\") == null) {\n    this.storeValue(1, 3, \"giveawayStartRan\", cache);\n    if (!fs.existsSync('./data/giveawayData.json')) {\n        fs.writeFile(\"./data/giveawayData.json\", \"{}\", function(err) {\n            if (err) {\n                return console.log(err);\n            }\n        });\n    }\n}","storage":"0","varName":"","name":"Run Script"}]},{"name":"","temp":"","event-type":"0","_id":"KtVHI","actions":[]},{"name":"memberJoin|InviteManager","temp":"memberJoined","event-type":"6","_id":"bbJRl","actions":[{"behavior":"1","interpretation":"0","code":"let memberThatJoined = tempVars(\"memberJoined\");\nlet memberUsername = memberThatJoined.username;\nlet invites = globalVars(\"globalGuildDatabase\");\nconst _this = this;\n\nasync function getInvites() {\n    const ei = invites[memberThatJoined.guild.id];\n    let guildInvites = await memberThatJoined.guild.fetchInvites();\n    guildInvites = guildInvites.array();\n    invites[memberThatJoined.guild.id] = guildInvites;\n    _this.storeValue(invites, 3, \"globalGuildDatabase\", cache);\n    const invite = guildInvites.find(i => ei.get(i.code).uses < i.uses);\n    const inviter = client.users.get(invite.inviter.id);\n    _this.storeValue(invite.code, 1, \"inviteCode\", cache);\n    _this.callNextAction(cache);\n}\n\ngetInvites();","storage":"0","varName":"","name":"Run Script"},{"server":"0","varName":"","info":"1","storage":"1","varName2":"serverID","name":"Store Server Info"},{"member":"2","varName":"memberJoined","dataName":"${tempVars(\"serverID\")}.inviteManager","changeType":"0","value":"tempVars(\"inviteCode\")","name":"Control Member Data"}]},{"name":"storeInvites|InviteManager","temp":"","event-type":"1","_id":"CdzGK","actions":[{"behavior":"0","interpretation":"0","code":"const fs = require('fs');\nvar invites = {};\n\nclient.guilds.forEach(g => {\n    g.fetchInvites().then(guildInvites => {\n      try{\n        invites[g.id] = guildInvites;\n      }\n      catch(error) {\n        console.log(error);\n      }\n    });\n  });\n\nthis.storeValue(invites, 3, \"globalGuildDatabase\", cache);","storage":"0","varName":"","name":"Run Script"}]},{"name":"serverJoinInvites|InviteManager","temp":"","event-type":"4","_id":"zUtVB","actions":[{"server":"0","varName":"","info":"0","storage":"1","varName2":"serverObject","name":"Store Server Info"},{"behavior":"0","interpretation":"0","code":"_this = this;\nvar guildServer = tempVars(\"serverObject\");\nvar globalGuildDatabase = globalVars(\"globalGuildDatabase\");\nserverID = tempVars(\"serverID\");\n\nasync function getInvites() {\n   var guildInvites = guildServer.fetchInvites()\n   globalGuildDatabase[guildServer.id] = guildInvites;\n   this.storeValue(invites, 3, \"globalGuildDatabase\", cache);\n}","storage":"0","varName":"","name":"Run Script"}]},{"name":"","temp":"","event-type":"0","_id":"IdfEJ","actions":[]},{"name":"WelcomeMessage","temp":"member","event-type":"6","actions":[{"info":"0","find":"740343481033293956","storage":"1","varName":"join-chan","name":"Find Channel"},{"info":"0","find":"696044124561735691","storage":"1","varName":"rules-chan","name":"Find Channel"},{"title":"Member Joined!","author":"","color":"","url":"","authorIcon":"","authorUrl":"","imageUrl":"","thumbUrl":"","timestamp":"true","debug":"false","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"joined-emb","name":"Create Embed Message"},{"storage":"1","varName":"joined-emb","fieldName":"Member:","message":"${tempVars(\"member\")}","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"joined-emb","message":"#welcome Welcome ${member}, to ! Please head over to #how-to-join, then check out the #role-assign! Once your finished, simply Wait for an interview to be announced in the #interview-anouncements, if your new to discord, you will receive a Notification on your phone or PC when they happen!","name":"Set Embed Description"},{"storage":"1","varName":"joined-emb","message":"${tempVars(\"mem-disname\")}","footerIcon":"${tempVars(\"mem-avt\")}","name":"Set Embed Footer"},{"storage":"1","varName":"joined-emb","channel":"5","varName2":"join-chan","storage3":"0","varName3":"","iffalse":"0","iffalseVal":"","messageContent":"","name":"Send Embed Message"}],"_id":"avZDS"},{"name":"mus","temp":"","event-type":"0","_id":"wgQgL","actions":[{"info":"0","find":"759624737646575677","storage":"1","varName":"vc","name":"Find Voice Channel"},{"channel":"3","varName":"vc","name":"Join Voice Channel"},{"url":"https://soundcloud.com/user-940689994/cvcrp-loading-screen-music","seek":"0","volume":"","passes":"1","bitrate":"","type":"0","name":"Play URL"}]},{"name":"NewEventff","temp":"","event-type":"0","_id":"dXRyg","actions":[{"info":"0","find":"759624737646575677","storage":"1","varName":"vc","name":"Find Voice Channel"},{"channel":"3","varName":"vc","name":"Join Voice Channel"},{"time":"2","measurement":"1","name":"Wait"},{"url":"https://www.youtube.com/watch?v=wjz6mvN_3rI&list=PLd6feHmSy5XIIfrzcbx8NEtx9z3ZAb32y","seek":"0","volume":"","passes":"1","bitrate":"","type":"1","name":"Play URL"}]},{"name":"","temp":"","event-type":"0","_id":"DAYCe","actions":[]},{"name":"NewTixReact","temp":"reaction","event-type":"28","_id":"gDstk","actions":[{"reaction":"1","varName":"reaction","info":"0","storage":"1","varName2":"message_obj","name":"Store Reaction Info"},{"message":"1","varName":"message_obj","info":"4","storage":"1","varName2":"chan","name":"Store Message Info"},{"channel":"3","varName":"chan","info":"2","storage":"1","varName2":"chan_name","name":"Store Channel Info"},{"storage":"1","varName":"chan_name","comparison":"1","value":"\"new-ticket\"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"reaction":"1","varName":"reaction","info":"7","storage":"1","varName2":"last_user","name":"Store Reaction Info"},{"member":"2","varName":"last_user","info":"0","varName2":"","iftrue":"1","iftrueVal":"","iffalse":"0","iffalseVal":"","name":"Check If Member"},{"reaction":"1","varName":"reaction","info":"3","storage":"1","varName2":"emoji_name","name":"Store Reaction Info"},{"reaction":"1","varName":"reaction","member":"2","varName2":"last_user","name":"Remove Reaction"},{"member":"2","varName":"last_user","info":"3","storage":"1","varName2":"displayName","name":"Store Member Info"},{"storage":"1","varName":"last_user","comparison":"0","value":"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"storage":"1","varName":"emoji_name","comparison":"1","value":"\"ðŸ“°\"","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"comment":"-- Create New Tix Channel --","color":"#00ffff","name":"Comment"},{"server":"0","varName":"","dataName":"tickets","defaultVal":"1","storage":"1","varName2":"ticketcount","name":"Store Server Data"},{"channelName":"ticket-${tempVars(\"displayName\")}-${tempVars(\"ticketcount\")}","categoryID":"${serverVars(\"ticketsCategoryID\")}","topic":"N/A - Created from reaction menu","position":"","storage":"1","varName":"newTix","name":"Create Text Channel"},{"server":"0","varName":"","dataName":"tickets","changeType":"1","value":"1","name":"Control Server Data"},{"channel":"3","varName":"newTix","info":"2","storage":"1","varName2":"name","name":"Store Channel Info"},{"comment":"Command message reply","color":"#60bff2","name":"Comment"},{"time":"500","measurement":"0","name":"Wait"},{"title":"Ticket Created","author":"","color":"#e65df4","url":"","authorIcon":"","authorUrl":"","imageUrl":"","thumbUrl":"","timestamp":"true","debug":"false","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"created","name":"Create Embed Message"},{"storage":"1","varName":"created","message":"Thanks for creating a ticket! You can view it by going to ${tempVars(\"newTix\")}","name":"Set Embed Description"},{"storage":"1","varName":"created","channel":"5","varName2":"chan","storage3":"1","varName3":"createdmsg","iffalse":"0","iffalseVal":"","name":"Send Embed Message"},{"comment":"Set Perms","color":"#60bff2","name":"Comment"},{"info":"1","find":"Support Team","storage":"1","varName":"supportRole","name":"Find Role"},{"storage":"3","varName":"newTix","permission":"READ_MESSAGES","state":"1","name":"Set Channel Permissions"},{"channel":"3","varName":"newTix","member":"2","varName2":"last_user","permission":"READ_MESSAGES","state":"0","name":"Set Member Channel Perms"},{"channel":"3","varName":"newTix","role":"3","varName2":"supportRole","permission":"READ_MESSAGES","state":"0","name":"Set Role Channel Perms"},{"member":"2","varName":"last_user","dataName":"${tempVars(\"name\")}_creator","changeType":"0","value":"1","name":"Control Member Data"},{"comment":"Logging (inside)","color":"#60bff2","name":"Comment"},{"input":"Author ID: [${tempVars(\"last_user\").id}] \" + \\n + \"\nTopic: [N/A - Created from reaction menu]","format":".txt","filename":"${tempVars(\"name\")}","filepath":"./logs/","filetask":"2","name":"File Control"},{"title":"","author":"","color":"#00FFFF","url":"","authorIcon":"","authorUrl":"","imageUrl":"","thumbUrl":"","timestamp":"true","debug":"false","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"in","name":"Create Embed Message"},{"storage":"1","varName":"in","fieldName":"Ticket Created","message":"${tempVars(\"last_user\")} has created a new ticket.","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"in","fieldName":"Subject","message":"N/A - Created from reaction menu","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"in","channel":"5","varName2":"newTix","storage3":"0","varName3":"","iffalse":"0","iffalseVal":"","name":"Send Embed Message"},{"comment":"Logging","color":"#60bff2","name":"Comment"},{"info":"1","find":"ticket-logs","storage":"1","varName":"ticketLogsChannel","name":"Find Channel"},{"title":"Ticket Created","author":"","color":"#e65df4","url":"","authorIcon":"","authorUrl":"","imageUrl":"","thumbUrl":"","timestamp":"true","debug":"false","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"log","name":"Create Embed Message"},{"storage":"1","varName":"log","message":"${tempVars(\"last_user\")} has opened a new ticket ${tempVars(\"newTix\")}.","name":"Set Embed Description"},{"storage":"1","varName":"log","fieldName":"Ticket ID","message":"ticket-${tempVars(\"displayName\")}-${tempVars(\"ticketcount\")}","inline":"1","name":"Add Embed Field"},{"storage":"1","varName":"log","channel":"5","varName2":"ticketLogsChannel","storage3":"0","varName3":"","iffalse":"0","iffalseVal":"","name":"Send Embed Message"},{"time":"10","measurement":"1","name":"Wait"},{"storage":"1","varName":"createdmsg","name":"Delete Message"}]}]